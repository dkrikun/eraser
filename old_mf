sources="main.cpp instrumentation.cpp crw_hooks.cpp shared_var.cpp vm_hooks.cpp"

cc src/sun/agent_util.c $include -I./src/sun -c -o bin/agent_util.o
cc src/sun/java_crw_demo.c $include -I./src/sun -c -o bin/java_crw_demo.o

g++ -g -Wno-deprecated -Wno-write-strings -shared -fPIC $sources bin/agent_util.o bin/java_crw_demo.o $include -o bin/agent.so
javac Proxy.java -d bin

CXX=g++
CXX_OPTIONS=-g -Wno-deprecated -Wno-write-stings -fPIC -c

main.o: main.cpp agent.h monitor.h instrumentation.h vm_hooks.h
	$(CXX) $(CXX_OPTIONS) $< -o $@

crw_hooks.o: crw_hooks.cpp crw_hooks.h agent.h
	$(CXX) $(CXX_OPTIONS) $< -o $@

instrumentation.o: instrumentation.cpp instrumentation.h crw_hooks.h agent.h
	$(CXX) $(CXX_OPTIONS) $< -o $@


shared_var.o: shared_var.cpp shared_var.h shared_var_impl.h shared_var_inst.h common.h
	$(CXX) $(CXX_OPTIONS) $< -o $@


